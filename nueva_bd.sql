-- MySQL Script generated by MySQL Workbench
-- Tue Dec  3 15:59:33 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema fastpacket
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema fastpacket
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `fastpacket` DEFAULT CHARACTER SET latin1 ;
USE `fastpacket` ;

-- -----------------------------------------------------
-- Table `fastpacket`.`cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`cliente` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`cliente` (
  `idCliente` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL,
  `apellidoPaterno` VARCHAR(45) NULL,
  `apellidoMaterno` VARCHAR(45) NULL,
  `telefono` VARCHAR(45) NULL,
  `correo` VARCHAR(45) NULL,
  `calle` VARCHAR(45) NULL,
  `numero` VARCHAR(45) NULL,
  `codigoPostal` VARCHAR(45) NULL,
  `colonia` VARCHAR(45) NULL,
  PRIMARY KEY (`idCliente`))
ENGINE = InnoDB
AUTO_INCREMENT = 8
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`rol`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`rol` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`rol` (
  `idRol` INT(11) NOT NULL,
  `nombre` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idRol`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`tipo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`tipo` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`tipo` (
  `idTipo` INT(11) NOT NULL,
  `nombre` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idTipo`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`unidad`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`unidad` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`unidad` (
  `idUnidad` INT(11) NOT NULL AUTO_INCREMENT,
  `marca` VARCHAR(45) NULL,
  `modelo` VARCHAR(45) NULL,
  `ano` INT(11) NULL,
  `vin` VARCHAR(45) NULL,
  `numeroIdentificacion` VARCHAR(45) NULL,
  `motivo` VARCHAR(45) NULL DEFAULT NULL,
  `activo` TINYINT NULL DEFAULT NULL,
  `idTipo` INT(11) NULL,
  PRIMARY KEY (`idUnidad`),
  INDEX `fk_unidad_tipo1_idx` (`idTipo` ASC)  ,
  CONSTRAINT `fk_unidad_tipo1`
    FOREIGN KEY (`idTipo`)
    REFERENCES `fastpacket`.`tipo` (`idTipo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`colaborador`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`colaborador` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`colaborador` (
  `idColaborador` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL,
  `apellidoPaterno` VARCHAR(45) NULL,
  `apellidoMaterno` VARCHAR(45) NULL,
  `curp` VARCHAR(45) NULL,
  `correo` VARCHAR(45) NULL,
  `numeroPersonal` VARCHAR(45) NULL,
  `contrasena` VARCHAR(45) NULL,
  `fotografia` LONGBLOB NULL DEFAULT NULL,
  `numeroLicencia` VARCHAR(45) NULL DEFAULT NULL,
  `idRol` INT(11) NOT NULL,
  `idUnidad` INT(11) NULL,
  PRIMARY KEY (`idColaborador`),
  UNIQUE INDEX `curp_UNIQUE` (`curp` ASC)  ,
  INDEX `fk_colaborador_rol1_idx` (`idRol` ASC)  ,
  INDEX `fk_colaborador_unidad1_idx` (`idUnidad` ASC) ,
  CONSTRAINT `fk_colaborador_rol1`
    FOREIGN KEY (`idRol`)
    REFERENCES `fastpacket`.`rol` (`idRol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_colaborador_unidad1`
    FOREIGN KEY (`idUnidad`)
    REFERENCES `fastpacket`.`unidad` (`idUnidad`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`estatus`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`estatus` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`estatus` (
  `idEstatus` INT(11) NOT NULL,
  `nombre` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idEstatus`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`envio`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`envio` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`envio` (
  `idEnvio` INT(11) NOT NULL AUTO_INCREMENT,
  `numeroGuia` VARCHAR(45) NULL,
  `costo` VARCHAR(45) NULL,
  `idColaborador` INT(11) NULL DEFAULT NULL,
  `idCliente` INT(11) NULL,
  `idEstatus` INT(11) NULL,
  `calleOrigen` VARCHAR(45) NULL,
  `numeroOrigen` VARCHAR(45) NULL,
  `coloniaOrigen` VARCHAR(45) NULL,
  `codigoPostalOrigen` VARCHAR(45) NULL,
  `estadoOrigen` VARCHAR(45) NULL,
  `ciudadOrigen` VARCHAR(45) NULL,
  `calleDestino` VARCHAR(45) NULL,
  `numeroDestino` VARCHAR(45) NULL,
  `coloniaDestino` VARCHAR(45) NULL,
  `codigoPostalDestino` VARCHAR(45) NULL,
  `estadoDestino` VARCHAR(45) NULL,
  `ciudadDestino` VARCHAR(45) NULL,
  PRIMARY KEY (`idEnvio`),
  INDEX `fk_envio_colaborador1_idx` (`idColaborador` ASC)  ,
  INDEX `fk_envio_cliente1_idx` (`idCliente` ASC)  ,
  INDEX `fk_envio_estado1_idx` (`idEstatus` ASC)  ,
  CONSTRAINT `fk_envio_cliente1`
    FOREIGN KEY (`idCliente`)
    REFERENCES `fastpacket`.`cliente` (`idCliente`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_envio_colaborador1`
    FOREIGN KEY (`idColaborador`)
    REFERENCES `fastpacket`.`colaborador` (`idColaborador`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_envio_estado1`
    FOREIGN KEY (`idEstatus`)
    REFERENCES `fastpacket`.`estatus` (`idEstatus`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`historial`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`historial` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`historial` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `fechaCambio` DATE NULL DEFAULT NULL,
  `comentario` TEXT NULL DEFAULT NULL,
  `idEnvio` INT(11) NOT NULL,
  `idColaborador` INT(11) NULL,
  `idEstatus` INT(11) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_historial_envio1_idx` (`idEnvio` ASC)  ,
  INDEX `fk_historial_colaborador1_idx` (`idColaborador` ASC)  ,
  INDEX `fk_historial_estado1_idx` (`idEstatus` ASC)  ,
  CONSTRAINT `fk_historial_colaborador1`
    FOREIGN KEY (`idColaborador`)
    REFERENCES `fastpacket`.`colaborador` (`idColaborador`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_historial_envio1`
    FOREIGN KEY (`idEnvio`)
    REFERENCES `fastpacket`.`envio` (`idEnvio`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_historial_estado1`
    FOREIGN KEY (`idEstatus`)
    REFERENCES `fastpacket`.`estatus` (`idEstatus`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `fastpacket`.`paquete`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fastpacket`.`paquete` ;

CREATE TABLE IF NOT EXISTS `fastpacket`.`paquete` (
  `idPaquete` INT(11) NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(45) NULL,
  `peso` VARCHAR(45) NULL,
  `alto` VARCHAR(45) NULL,
  `ancho` VARCHAR(45) NULL,
  `profundidad` VARCHAR(45) NULL,
  `idEnvio` INT(11) NULL,
  PRIMARY KEY (`idPaquete`),
  INDEX `fk_paquete_envio1_idx` (`idEnvio` ASC)  ,
  CONSTRAINT `fk_paquete_envio1`
    FOREIGN KEY (`idEnvio`)
    REFERENCES `fastpacket`.`envio` (`idEnvio`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------------------------

INSERT INTO `fastpacket`.`rol` (`idRol`, `nombre`) VALUES
(1, 'Administrador'),
(2, 'Ejecutivo de tienda'),
(3, 'Conductor');

INSERT INTO `fastpacket`.`estatus` (`idEstatus`, `nombre`) VALUES
(1, 'Pendiente'),
(2, 'En transito'),
(3, 'Detenido'),
(4, 'Cancelado'),
(5,'Entregado');

INSERT INTO `fastpacket`.`tipo` (`idTipo`, `nombre`) VALUES
(1, 'Gasolina'),
(2, 'Diesel'),
(3, 'Electrica'),
(4,'Hibrida');

INSERT INTO `fastpacket`.`cliente` 
(`idCliente`,`nombre`, `apellidoPaterno`, `apellidoMaterno`, `telefono`, `correo`, `calle`, `numero`, `codigoPostal`, `colonia`) 
VALUES 
(1,'Juan', 'Perez', 'Gomez', '5551234567', 'juan.perez@email.com', 'Calle Juarez', '123', '91000', 'Centro'),
(2,'Maria', 'Lopez', 'Hernandez', '5557654321', 'maria.lopez@email.com', 'Avenida Lazaro Cardenas', '456', '91020', 'Zona Centro');

INSERT INTO `fastpacket`.`unidad` 
(`idUnidad`,`marca`, `modelo`, `ano`, `vin`, `numeroIdentificacion`, `motivo`, `activo`, `idTipo`) 
VALUES 
(1,'Toyota', 'Corolla', 2020, 'JT2BG22KX4M022670', '2020JT2B',null, 1, 1),
(2,'Chevrolet', 'Sonic', 2018, '1G1JC5SH1J4112345', '20181G1J', 'Accidente', 0, 3);


INSERT INTO `fastpacket`.`colaborador` 
(`idColaborador`,`nombre`, `apellidoPaterno`, `apellidoMaterno`, `curp`, `correo`, `numeroPersonal`, `contrasena`, `idRol`, `numeroLicencia`,`idUnidad`) 
VALUES 

(1,'Juan', 'Perez', 'Gomez', 'JUAP123456HDFLNM09', 'juan.perez@email.com', '001', '123', 1,NULL,NULL),

(2,'Ana', 'Lopez', 'Martinez', 'ANAL654321HDFLMM01', 'ana.lopez@email.com', '002', '456', 2,NULL ,NULL),

(3,'Carlos', 'Garcia', 'Ruiz', 'CARG890123HDFLNM01', 'carlos.garcia@email.com', '003', '789', 3, 'LIC123', 1);

INSERT INTO `fastpacket`.`envio` 
(`idEnvio`, `numeroGuia`, `costo`, `idColaborador`, `idCliente`, `idEstatus`, `calleOrigen`, `numeroOrigen`, `coloniaOrigen`, `codigoPostalOrigen`, `estadoOrigen`, `ciudadOrigen`, `calleDestino`, `numeroDestino`, `coloniaDestino`, `codigoPostalDestino`, `estadoDestino`, `ciudadDestino`) 
VALUES 
(1,'GUIA123', '100.00', 3, 1, 1, 'Calle Juarez', '123', 'Centro', '91000', 'Veracruz', 'Xalapa', 'Avenida Lázaro Cárdenas', '456', 'Zona Centro', '91020', 'Veracruz', 'Xalapa'),
(2,'GUIA456', '250.00', 3, 2, 2, 'Calle Revolucion', '789', 'Angelopolis', '91100', 'Veracruz', 'Xalapa', 'Avenida de los Maestros', '321', 'Lomas Verdes', '91110', 'Veracruz', 'Xalapa');

INSERT INTO `fastpacket`.`historial` 
(`id`, `fechaCambio`, `comentario`, `idEnvio`, `idColaborador`, `idEstatus`) 
VALUES 
(1,'2024-12-04', 'El envio esta siendo enviado y esta en camino hacia su destino.', 1, 3, 2),
(2,'2024-12-05', 'El envio fue cancelado por el administrador debido a un problema con la direccion de destino.', 1, 1, 4);

INSERT INTO `fastpacket`.`paquete` 
(`idPaquete`, `descripcion`, `peso`, `alto`, `ancho`, `profundidad`, `idEnvio`) 
VALUES 
(1,'Paquete de ropa', '2.5', '30', '40', '50', 1);

